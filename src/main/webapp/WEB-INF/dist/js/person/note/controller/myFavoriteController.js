define("common/util",["jquery"],function(){function e(e){$.each(e,function(e,t){"string"==typeof t.el?$(document).on(t.event,t.el,t.handler):$(t.el).on(t.event,t.handler)})}function t(e){var t={},n=[];return e&&-1!==e.indexOf("?")?($.each(e.substr(e.indexOf("?")+1).split("&"),function(e,r){n=r.split("="),t[n[0]]=n[1]}),t):t}function n(e){e&&$.cookie("exsToken",e,{path:"/",expires:7})}function r(){return $.cookie("exsToken")}function i(){$.cookie("exsToken",null,{path:"/"})}function a(e){for(var t,n,r,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,o=e.length,s="";o>a;){if(t=255&e.charCodeAt(a++),a==o){s+=i.charAt(t>>2),s+=i.charAt((3&t)<<4),s+="==";break}if(n=e.charCodeAt(a++),a==o){s+=i.charAt(t>>2),s+=i.charAt((3&t)<<4|(240&n)>>4),s+=i.charAt((15&n)<<2),s+="=";break}r=e.charCodeAt(a++),s+=i.charAt(t>>2),s+=i.charAt((3&t)<<4|(240&n)>>4),s+=i.charAt((15&n)<<2|(192&r)>>6),s+=i.charAt(63&r)}return s}function o(e){var t,n=[];return $.each(e,function(e,r){t=r.replace(/ /g,""),""!=t&&n.push(t)}),n}function s(e,t){var n,r;switch(e){case"phone":n="^[1][358][0-9]{9}$";break;case"ifSpecial":n="^[a-zA-Z0-9一-龥]+$";break;case"email":n="[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}";break;default:n=""}return r=new RegExp(n),r.test(t)}function c(e,t){var n=arguments[2]||new Date;switch(e){case"s":n=new Date(n.getTime()+1e3*t);break;case"n":n=new Date(n.getTime()+6e4*t);break;case"h":n=new Date(n.getTime()+36e5*t);break;case"d":n=new Date(n.getTime()+864e5*t);break;case"w":n=new Date(n.getTime()+6048e5*t);break;case"m":n=new Date(n.getFullYear(),n.getMonth()+t,n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds());break;default:n=new Date(n.getFullYear()+t,n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds())}return n=n.getTime()>=(new Date).getTime()?new Date:n,[n.getFullYear(),n.getMonth()+1,n.getDate()].join("/")}function l(e,t){var n=t,r=["日","一","二","三","四","五","六"];return n=n.replace(/yy/,e.getFullYear()),n=n.replace(/y/,e.getYear()%100>9?(e.getYear()%100).toString():"0"+e.getYear()%100),n=n.replace(/mm/,e.getMonth()>=9?(e.getMonth()+1).toString():"0"+(e.getMonth()+1)),n=n.replace(/m/g,e.getMonth()+1),n=n.replace(/w|W/g,r[e.getDay()]),n=n.replace(/dd/,e.getDate()>9?e.getDate().toString():"0"+e.getDate()),n=n.replace(/d/g,e.getDate()),n=n.replace(/hh/,e.getHours()>9?e.getHours().toString():"0"+e.getHours()),n=n.replace(/h/g,e.getHours()),n=n.replace(/mm/,e.getMinutes()>9?e.getMinutes().toString():"0"+e.getMinutes()),n=n.replace(/m/g,e.getMinutes()),n=n.replace(/ss/,e.getSeconds()>9?e.getSeconds().toString():"0"+e.getSeconds()),n=n.replace(/s/g,e.getSeconds())}return{bindEvents:e,getUrlParams:t,setToken:n,getToken:r,removeToken:i,base64Encode:a,trims:o,checkRagular:s,timeInterval:c,dateFormat:l}}),define("common/dom",["jquery"],function(e){function t(t,n){var r='<div class="overlay"></div>';e("body").append(r);var t=e(t),a=i[n],o=t.find(".js-placeholder");o.length&&o.remove(),t.prepend(a)}function n(t){var t=e(t);e(".overlay").remove(),t.find(".js-placeholder").remove()}function r(t){var n='<form id="'+t.formId+'" class="hidden" method="post">',r="",i="";return e.each(t.selectList,function(a,o){for(var s=0;s<t.fields.length;s++)r=t.inputName+"["+a+"]."+t.fields[s],i=e(this).data(t.fields[s].toLowerCase()),"undefined"==typeof i&&(i=""),n+='<input name="'+r+'" value="'+i+'" />'}),n+="</form>"}var i={"loading-large":'<div class="js-placeholder loading-large loading-pos"><div class="vertical-center"><img class="loading-img" src="../../img/loading_48.gif" /><p>数据加载中，请稍后</p></div></div>',"empty-data":'<div class="js-placeholder empty-data loading-pos"><div class="vertical-center"><img class="loading-img" src="../../img/empty_data.png" /><p><span class="major">唔，未找到任何数据</span> 您还可以看看其它行情哦，或者稍后再试</p></div></div>',"loading-error":'<div class="js-placeholder loading-error loading-pos"><div class="vertical-center"><img class="loading-img" src="../../img/loading_error.png" /><p>哎呀，似乎网络开小差了</p></div></div>',"wechatloading-large":'<div class="js-placeholder exception loading-large"><div class="vertical-center"><div class="preloader"></div><p>努力加载中...</p></div></div>',"wechatempty-data":'<div class="js-placeholder exception empty-data"><div class="nodata"><img src="../../img/nodata.png" width="46%" height="auto"/><p>唔，未找到任何数据！</p><span>您还可以看看其它行情哦，或者稍后再试。</span></div></div>',"wechatloading-error":'<div class="js-placeholder exception loading-error"><span class="icon-error"></span>加载失败，请稍后再试！</div>'};return{showPlaceholder:t,removePlaceholder:n,generateDldForm:r}}),define("common/http",["jquery","layer1","common/util","common/dom"],function(e,t,n,r){function i(n){var i=e.extend({},s,n);return i.actionConfig&&(i.beforeSend=function(){r.showPlaceholder(i.actionConfig.dom,i.actionConfig.type)}),i.url=a(n.url),i.success=function(e){return i.actionConfig&&r.removePlaceholder(i.actionConfig.dom),i.actionConfig&&"200"!=e.status?void r.showPlaceholder(i.actionConfig.dom,i.actionConfig.type):void setTimeout(function(){n.success&&n.success(e)},400)},i.error=function(e,a,o){return 401===e.status?(t.open({content:"您尚未登录或登录时间过长,请重新登录!",icon:3,title:"登录提示",yes:function(){window.location.href=window.__NOTEBOOK__.root_url},end:function(){t.closeAll()}}),!0):(i.actionErrorConfig&&r.showPlaceholder(i.actionErrorConfig.dom,i.actionErrorConfig.type),void(n.error&&n.error(e,a,o)))},i.serializable&&(i.contentType="application/json",i.data=JSON.stringify(i.data)),i}function a(t){var n={_t:(new Date).getTime()},r=/\?/gi.test(t)?"&":"?";return t+r+e.param(n)}function o(t){var n=e.ajax(i(t));return n}t.config({path:"/js/lib/layer/"});var s={async:!0,dataType:"json",type:"get",serializable:!1};return{httpRequest:o}}),define("person/note/model/myFavoriteModel",["common/http"],function(e){function t(t){e.httpRequest({url:window.__NOTEBOOK__.root_url+"person/myfavorite/delete",type:"post",data:t.data,success:function(e){t.callBack(e)},error:t.error})}function n(t){e.httpRequest({url:window.__NOTEBOOK__.root_url+"person/myfavorite/querymyfavorite",data:t.data,beforeSend:function(){t.beforeSend()},success:function(e){t.callBack(e)},error:t.error})}return{deleteMyFavorite:t,queryMyFavorite:n}}),define("common/hbsHelper",["handlebars"],function(e){e.registerHelper("ifCond",function(e,t,n,r){switch(t){case"!=":return e!=n?r.fn(this):r.inverse(this);case"==":return e==n?r.fn(this):r.inverse(this);case"===":return e===n?r.fn(this):r.inverse(this);case"<":return n>e?r.fn(this):r.inverse(this);case"<=":return n>=e?r.fn(this):r.inverse(this);case">":return e>n?r.fn(this):r.inverse(this);case">=":return e>=n?r.fn(this):r.inverse(this);case"&&":return e&&n?r.fn(this):r.inverse(this);case"||":return e||n?r.fn(this):r.inverse(this);case"length":return e.length===n?r.fn(this):r.inverse(this);default:return r.inverse(this)}}),e.registerHelper("math",function(e,t,n){return"+"==t?e+n:"-"==t?e-n:"*"==t?e*n:"/"==t?e/n:"%"==t?e%n:void 0}),e.registerHelper("addOne",function(e){return e+1}),e.registerHelper("prettifyDate",function(e){return e?e.replace("T"," "):null}),e.registerHelper("substring",function(e){return null==e||""==e||e.indexOf("&")<0?e:e.substring(0,e.indexOf("&"))})}),define("person/note/view/myFavoriteView",["person/note/model/myFavoriteModel","common/util","layer1","handlebars","common/hbsHelper","pagination"],function(e,t,n,r){function i(){u(),a()}function a(){t.bindEvents([{el:"#query",event:"click",handler:function(){s(0,$(".js-type[js-type='1']").attr("js-category-id"))}},{el:".js-type",event:"click",handler:function(){$(".js-type").removeClass("cur").removeAttr("js-type"),$(this).addClass("cur").attr("js-type","1"),s(0,$(this).attr("js-category-id"))}},{el:".js-cancel",event:"click",handler:function(){var e=$(this).attr("js-category-id");n.confirm("确认取消收藏？",{icon:3},function(){o(e)})}},{el:".js-hiddenType",event:"click",handler:function(){$(this).siblings().show(),$(".js-type").removeClass("cur").removeAttr("js-type"),$("#ded").remove(),$(".js-allType li").last().before("<li id='ded'><a class='js-type cur ellips' js-type='1'  title='"+$(this).text()+"' js-category-id='"+$(this).attr("js-category-id")+"'>"+$(this).text()+"</a></li>"),$(this).hide(),s(0,$(this).attr("js-category-id")),0==$(".more-type a:visible").length&&$(".more").hide()}},{el:"#queryParam",event:"keypress",handler:function(){13==event.keyCode&&$("#query").click()}}])}function o(t){e.deleteMyFavorite({data:{noteId:t},callBack:function(e){e?n.msg("取消收藏成功",{icon:1,time:500},function(){s(0,$('.type .js-type[js-type="1"]').attr("js-category-id"))}):n.msg("取消收藏失败",{icon:2,time:500})},error:function(e){n.alert("操作失败，请重试")}})}function s(e,t){t?c(e,t):c(e)}function c(t,i){var a=$.trim($("#queryParam").val());e.queryMyFavorite({data:{categoryId:i,queryParamLike:a,pageNum:t+1,pageSize:g},beforeSend:function(){n.load(2,{shade:[.3,"#d9d9d9"],type:3})},callBack:function(e){n.closeAll();var i=e.data.total;$("#took").text(e.data.took/1e3),$("#itemCount").text(i),i>1e3&&(i=1e3);var a=r.compile($("#listTemplate").html());$(".js-template").html(a(e.data)),l(i,t),"0"==i?$("#js-pagination").hide():$("#js-pagination").show()},error:function(e){n.alert("操作失败，请重试")}})}function l(e,t){$("#pagination").pagination(e,{items_per_page:g,prev_text:'<i class="icon-triangle-left"></i>上一页',next_text:'下一页<i class="icon-triangle-right"></i>',num_display_entries:10,current_page:t,link_to:"javascript:void(0)",callback:d})}function d(e,t){$("html,body").animate({scrollTop:0},10),s(e,$(".js-type[js-type='1']").attr("js-category-id"))}function u(){if($("#itemCount").text()>0){var e=$("#itemCount").text();e>1e3&&(e=1e3)}else $("#js-pagination").hide();l(e,0)}var g=10;return{init:i}}),require(["person/note/view/myFavoriteView"],function(e){e.init()}),define("person/note/controller/myFavoriteController",function(){});